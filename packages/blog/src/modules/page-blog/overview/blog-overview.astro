---
interface Props {
    context: string;
}

const { context } = Astro.props;

// const overview = await fetch(`https://blog-overview.function.glare-labs.uk/api/overview`, {
//     body: JSON.stringify({ blog: context }),
//     method: "POST",
// });

// const { response } = await overview.json();
const response = `
The article is about the author finally acquiring and officially launching their own domain name, **glare-labs.uk**. This marks a significant milestone in their personal website's journey, representing a transition into a more professional and established brand. Prior to this, their blog and other projects were hosted on platforms like GitHub Pages and Firebase, which provided access but lacked a sense of polish. Now that they have their own domain, it has transformed their website's presence entirely. The author chose to purchase the domain name through Cloudflare, opting for an affordable price of only 5 USD per year. Additionally, Cloudflare provides exceptional services, ensuring the stability and security of their website. With the transfer underway, the author aims to gradually migrate their previous blog and projects to their new domain, requiring some time dedicated to DNS configuration and website migration tasks. They are committed to completing the migration diligently to ensure users can access their website through the new URL. Owning their domain name has always been a dream for the author, and their achievement serves as a testament to their dedication and ambition. They plan to utilize their new domain to create more engaging and valuable content, fostering growth and a sense of belonging within the online community. They welcome continued readership and encourage followers to join them on this exciting journey as they further establish and evolve the **glare-labs.uk** platform.
`;
---

<div class="blog-overview" data-show-full-content="false" role="article" aria-label="Ai Overview" aria-roledescription="The content of the Overview is generated by AI.">
    <h1 class="title md-typescale-title-medium">Overview</h1>
    <p class="description md-typescale-body-small">The content of the Overview is generated by AI.</p>
    <p class="content md-typescale-body-medium">
        {response}
    </p>

    <div class="expand" role="button">
        <md-outlined-button class="expand-button">
            Expand All
            <md-icon slot="icon">expand_all</md-icon>
        </md-outlined-button>
        <md-outlined-button class="fold-button">
            Fold All
            <md-icon slot="icon">unfold_less</md-icon>
        </md-outlined-button>
    </div>

    <div class="background" aria-hidden="true"></div>
</div>

<script>
    import "@material/web/button/outlined-button";
    import "@material/web/icon/icon";
</script>

<script>
    document.addEventListener("astro:page-load", () => {
        const overview = document.querySelector(".blog-overview") as HTMLElement;
        const expandButton = overview.querySelector(".expand-button");
        const foldButton = overview.querySelector(".fold-button");

        expandButton.addEventListener("click", () => {
            overview.setAttribute("data-show-full-content", "true");
        });
        foldButton.addEventListener("click", () => {
            overview.setAttribute("data-show-full-content", "false");
        });
    });
</script>

<style>
    .blog-overview {
        border-width: 1px;
        border-color: var(--md-sys-color-primary-container);
        border-radius: 28px;
        margin: 16px;
        z-index: 0;
        overflow: hidden;
        position: relative;

        & > .background {
            position: absolute;
            inset: 0;
            border-radius: inherit;
            z-index: 0;
            background: linear-gradient(to bottom right, var(--md-sys-color-primary-container), transparent);
            opacity: 0.24;
        }

        & > .title {
            position: relative;
            z-index: 1;
            color: var(--md-sys-color-primary);
            margin: 24px 24px 6px;
        }
        & > .description {
            position: relative;
            z-index: 1;
            color: var(--md-sys-color-primary);
            margin: 0px 24px 32px;
            font-style: italic;
        }

        & > .content {
            position: relative;
            z-index: 1;
            color: var(--md-sys-color-primary);
            margin: 12px 24px 32px;
            transition-property: max-height, height;
            transition-duration: 200ms;
            height: 64px;
            overflow: hidden;
        }

        & > .expand {
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
            position: relative;
            padding: 12px 0 12px;
            background-color: var(--md-sys-color-surface);

            transition-property: background-color, opacity;
            transition-duration: 200ms;

            --_expand-height: 72px;

            & > :is(.expand-button, .fold-button) {
                z-index: 2;
            }

            &::after {
                content: "";
                position: absolute;
                display: block;
                left: 0;
                top: calc(-1 * var(--_expand-height));
                z-index: 1;
                width: 100%;
                height: var(--_expand-height);
                background: linear-gradient(to bottom, transparent, var(--md-sys-color-surface) 50%);
            }
        }

        &[data-show-full-content="false"] {
            & .expand-button {
                display: block;
            }
            & .fold-button {
                display: none;
            }
        }
        &[data-show-full-content="true"] {
            & .content {
                height: fit-content;
            }
            & .expand-button {
                display: none;
            }
            & .fold-button {
                display: block;
            }
            & > .expand {
                background-color: transparent;
                &::after {
                    opacity: 0;
                }
            }
        }
    }
</style>
